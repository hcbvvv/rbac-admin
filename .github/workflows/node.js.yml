name: Build React Vite Project

# 触发条件：推送到main分支或对main分支的PR
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    # 在最新的Ubuntu环境上运行
    runs-on: ubuntu-latest

    steps:
    # 检出代码仓库
    - uses: actions/checkout@v4

    # 设置Node.js环境
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'  # 使用Node.js 20版本
        cache: 'npm'        # 缓存npm依赖以加快构建速度

    # 安装项目依赖
    - name: Install dependencies
      run: npm install

    # 构建项目
    - name: Build
      run: npm run build

    # 上传构建产物作为artifact，便于后续部署或下载
    - name: Upload build artifacts
      uses: actions/upload-artifact@v4
      with:
        name: build-output
        path: dist/  # Vite默认的构建输出目录
